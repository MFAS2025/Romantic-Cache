<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Romantic Cache</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to top right, #ffdde1, #ee9ca7);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }

    .heart {
      position: absolute;
      font-size: 24px;
      color: #ff6b81;
      animation: floatUp linear infinite;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(100vh) scale(0.5);
        opacity: 1;
      }
      100% {
        transform: translateY(-20vh) scale(1.2);
        opacity: 0;
      }
    }

    .logo {
      font-size: 2.5em;
      margin-top: 20px;
      animation: pulse 1.5s infinite;
      z-index: 2;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
    }

    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 3em;
      color: #d6336c;
      margin: 0.2em;
      z-index: 2;
    }

    .name-edit, .profile-pictures {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      z-index: 2;
    }

    .name-edit input {
      font-size: 1em;
      padding: 8px;
      border-radius: 10px;
      border: none;
    }

    .profile-pictures img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    .heart-bulb {
      width: 100px;
      height: 100px;
      background: red;
      position: relative;
      transform: rotate(-45deg);
      border-radius: 50% 50% 0 0;
      margin: 10px;
      box-shadow: 0 0 0 transparent;
      opacity: 0.2;
      transition: 0.3s ease;
    }

    .section {
      background: white;
      padding: 20px;
      margin: 10px;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      z-index: 2;
    }

    textarea {
      width: 100%;
      min-height: 60px;
      font-size: 1em;
      padding: 10px;
      border-radius: 10px;
    }

    .timeline {
      width: 90%;
      max-width: 600px;
      background: white;
      border-radius: 10px;
      margin: 20px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      z-index: 2;
    }

    .dark-mode {
      background: #222;
      color: #f2f2f2;
    }

    .dark-mode .section, .dark-mode .timeline {
      background: #333;
      color: #fff;
    }

    #music {
      margin-top: 10px;
      z-index: 2;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="floating-hearts" id="floatingHearts"></div>
  <div class="logo">‚ù§Ô∏è</div>
  <h1><span id="name1">Ck</span> üíñ <span id="name2">Mavi</span></h1>

  <div class="profile-pictures">
    <div>
      <input type="file" id="file1" accept="image/*" />
      <img id="img1" src="" alt="Profile 1" />
    </div>
    <div>
      <input type="file" id="file2" accept="image/*" />
      <img id="img2" src="" alt="Profile 2" />
    </div>
  </div>

  <div class="name-edit">
    <input type="text" id="input1" placeholder="Your name" value="Ck"/>
    <input type="text" id="input2" placeholder="Partner's name" value="Mavi"/>
  </div>

  <div>
    <label><input type="checkbox" id="love1" /> Still in love üíò</label>
    <label><input type="checkbox" id="love2" /> Still in love üíò</label>
  </div>

  <div class="heart-bulb" id="heartBulb"></div>

  <div>
    Anniversary: <input type="date" id="anniversary" />
    <span id="daysTogether"></span>
  </div>

  <div class="section">
    <h2>What I'm Grateful For</h2>
    <textarea id="grateful"></textarea>
  </div>

  <div class="section hidden" id="hateSection">
    <h2>What I Hate</h2>
    <textarea id="hate"></textarea>
  </div>
  <button onclick="document.getElementById('hateSection').classList.toggle('hidden')">üëÄ Show/Hide Hate</button>

  <div class="section">
    <h2>How I'm Feeling</h2>
    <textarea id="feeling"></textarea>
  </div>

  <button onclick="saveEverything()">üíæ Save üíñ</button>

  <div class="section">
    <label><input type="checkbox" id="darkToggle"> üåô Dark Mode</label>
  </div>

  <div class="timeline">
    <h3>üï∞ Memory Timeline</h3>
    <div id="memoryLog"></div>
  </div>

  <audio id="music" controls loop>
    <source src="https://upload.wikimedia.org/wikipedia/en/7/7e/Taylor_Swift_-_Lover.ogg" type="audio/ogg" />
    Your browser does not support audio.
  </audio>

  <script>
    const name1 = document.getElementById("name1");
    const name2 = document.getElementById("name2");
    const input1 = document.getElementById("input1");
    const input2 = document.getElementById("input2");
    const grateful = document.getElementById("grateful");
    const hate = document.getElementById("hate");
    const feeling = document.getElementById("feeling");
    const file1 = document.getElementById("file1");
    const file2 = document.getElementById("file2");
    const img1 = document.getElementById("img1");
    const img2 = document.getElementById("img2");
    const love1 = document.getElementById("love1");
    const love2 = document.getElementById("love2");
    const heartBulb = document.getElementById("heartBulb");
    const memoryLog = document.getElementById("memoryLog");
    const anniversary = document.getElementById("anniversary");
    const daysTogether = document.getElementById("daysTogether");
    const darkToggle = document.getElementById("darkToggle");

    function saveEverything() {
      localStorage.setItem("name1", input1.value);
      localStorage.setItem("name2", input2.value);
      localStorage.setItem("grateful", grateful.value);
      localStorage.setItem("hate", hate.value);
      localStorage.setItem("feeling", feeling.value);
      localStorage.setItem("img1", img1.src);
      localStorage.setItem("img2", img2.src);
      localStorage.setItem("love1", love1.checked);
      localStorage.setItem("love2", love2.checked);
      localStorage.setItem("anniversary", anniversary.value);
      const log = `${new Date().toISOString().split("T")[0]}: "${grateful.value}" üíå "${feeling.value}"`;
      let logs = JSON.parse(localStorage.getItem("memories") || "[]");
      logs.push(log);
      localStorage.setItem("memories", JSON.stringify(logs));
      updateMemory();
      updateHeart();
    }

    function updateHeart() {
      heartBulb.style.opacity = (love1.checked && love2.checked) ? "1" : "0.2";
      heartBulb.style.boxShadow = (love1.checked && love2.checked) ? "0 0 20px red" : "none";
    }

    function updateMemory() {
      const logs = JSON.parse(localStorage.getItem("memories") || "[]");
      memoryLog.innerHTML = logs.map(log => `<div>${log}</div>`).join("");
    }

    function load() {
      input1.value = localStorage.getItem("name1") || "Ck";
      input2.value = localStorage.getItem("name2") || "Mavi";
      grateful.value = localStorage.getItem("grateful") || "";
      hate.value = localStorage.getItem("hate") || "";
      feeling.value = localStorage.getItem("feeling") || "";
      img1.src = localStorage.getItem("img1") || "";
      img2.src = localStorage.getItem("img2") || "";
      love1.checked = localStorage.getItem("love1") === "true";
      love2.checked = localStorage.getItem("love2") === "true";
      anniversary.value = localStorage.getItem("anniversary") || "";
      darkToggle.checked = document.body.classList.contains("dark-mode");
      updateHeart();
      updateMemory();
      name1.textContent = input1.value;
      name2.textContent = input2.value;
      updateAnniversaryCounter();
    }

    function updateAnniversaryCounter() {
      const date = new Date(anniversary.value);
      if (isNaN(date)) return;
      const now = new Date();
      const diff = Math.floor((now - date) / (1000 * 60 * 60 * 24));
      daysTogether.textContent = `üíò ${diff} days together`;
    }

    file1.onchange = e => {
      const r = new FileReader();
      r.onload = ev => {
        img1.src = ev.target.result;
        localStorage.setItem("img1", ev.target.result);
      };
      r.readAsDataURL(e.target.files[0]);
    };

    file2.onchange = e => {
      const r = new FileReader();
      r.onload = ev => {
        img2.src = ev.target.result;
        localStorage.setItem("img2", ev.target.result);
      };
      r.readAsDataURL(e.target.files[0]);
    };

    input1.oninput = () => name1.textContent = input1.value;
    input2.oninput = () => name2.textContent = input2.value;
    love1.onchange = love2.onchange = updateHeart;
    anniversary.onchange = () => {
      localStorage.setItem("anniversary", anniversary.value);
      updateAnniversaryCounter();
    };

    darkToggle.onchange = () => {
      document.body.classList.toggle("dark-mode");
    };

    setInterval(() => {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDuration = (2 + Math.random() * 3) + "s";
      heart.innerHTML = "üíñ";
      document.getElementById("floatingHearts").appendChild(heart);
      setTimeout(() => heart.remove(), 5000);
    }, 500);

    window.onload = load;
  </script>
</body>
</html>
