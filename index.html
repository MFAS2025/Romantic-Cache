<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Romantic Cache ðŸ’–</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#ee9ca7" />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet" />
  <style>
    /* Styles are the same as the previous version */
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to top right, #ffdde1, #ee9ca7);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 3em;
      color: #d6336c;
    }
    .logo { font-size: 3em; animation: pulse 1.5s infinite; }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    .profile-pictures img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    input, textarea {
      font-size: 1em;
      margin: 5px;
    }
    .section {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin: 10px;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .floating-hearts { position: fixed; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
    .heart {
      position: absolute;
      color: rgba(255, 105, 180, 0.5);
      font-size: 24px;
      animation: float 6s linear infinite;
    }
    @keyframes float {
      0% { transform: translateY(100vh) scale(1); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="floating-hearts" id="heartsContainer"></div>
  <div class="logo">ðŸ’–</div>
  <h1><span id="name1">Ck</span> ðŸ’— <span id="name2">Mavi</span></h1>
  <input type="text" id="input1" value="Ck" />
  <input type="text" id="input2" value="Mavi" />
  <input type="file" id="file1" accept="image/*" />
  <input type="file" id="file2" accept="image/*" />
  <img id="img1" width="100" height="100" />
  <img id="img2" width="100" height="100" />
  <div>
    <label><input type="checkbox" id="love1" checked /> Still in love ðŸ’˜</label>
    <label><input type="checkbox" id="love2" checked /> Still in love ðŸ’˜</label>
  </div>
  <div>
    <label>Anniversary: <input type="date" id="anniv" /></label>
    <div id="annivCounter"></div>
  </div>
  <div class="section"><h2>What I'm Grateful For</h2><textarea id="grateful"></textarea></div>
  <div class="section"><h2>What I Hate</h2><textarea id="hate"></textarea></div>
  <div class="section"><h2>How I'm Feeling</h2><textarea id="feeling"></textarea></div>
  <button onclick="save()">Save ðŸ’¾</button>
  <div id="timeline"></div>
  <audio controls loop src="https://dl.dropboxusercontent.com/s/3cb7qp9fdh9yfqu/Lover.mp3"></audio>
  <script>
    const name1 = document.getElementById("name1");
    const name2 = document.getElementById("name2");
    const input1 = document.getElementById("input1");
    const input2 = document.getElementById("input2");
    const anniv = document.getElementById("anniv");
    const annivCounter = document.getElementById("annivCounter");
    const timeline = document.getElementById("timeline");
    function save() {
      const data = {
        name1: input1.value,
        name2: input2.value,
        grateful: document.getElementById("grateful").value,
        hate: document.getElementById("hate").value,
        feeling: document.getElementById("feeling").value,
        date: anniv.value,
        love1: document.getElementById("love1").checked,
        love2: document.getElementById("love2").checked,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem("romanticData", JSON.stringify(data));
      let h = JSON.parse(localStorage.getItem("romanticTimeline") || "[]");
      h.push(data); localStorage.setItem("romanticTimeline", JSON.stringify(h.slice(-5)));
      alert("Saved ðŸ’¾");
      showTimeline();
    }
    function showTimeline() {
      const h = JSON.parse(localStorage.getItem("romanticTimeline") || "[]");
      timeline.innerHTML = "<h3>ðŸ•° Memory Timeline</h3>" + h.reverse().map(e => `<div><em>${e.timestamp.split("T")[0]}</em>: "${e.feeling}"</div>`).join("");
    }
    function update() {
      const data = JSON.parse(localStorage.getItem("romanticData"));
      if (!data) return;
      input1.value = data.name1;
      input2.value = data.name2;
      name1.textContent = data.name1;
      name2.textContent = data.name2;
      anniv.value = data.date;
      const d1 = new Date(data.date);
      const d2 = new Date();
      const days = Math.floor((d2 - d1) / (1000*60*60*24));
      annivCounter.innerText = `â¤ï¸ Together for ${days} days`;
    }
    function floatHeart() {
      const h = document.createElement("div");
      h.className = "heart";
      h.style.left = Math.random() * 100 + "vw";
      h.style.animationDuration = (3 + Math.random() * 3) + "s";
      h.textContent = "ðŸ’–";
      document.getElementById("heartsContainer").appendChild(h);
      setTimeout(() => h.remove(), 8000);
    }
    setInterval(floatHeart, 800);
    window.onload = () => { update(); showTimeline(); };
  </script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
</body>
</html>